---
import TwoColLayout from "./TwoColLayout.astro";
import dayjs from "dayjs";
import "dayjs/locale/ja";
import Posts from "../components/blog/Posts.astro";
const { frontmatter, content, headings } = Astro.props;
const topHeading = headings.filter((heading: any) => heading.depth <= 2);
const isBlog = frontmatter.url.startsWith("/blog");
---

<div class="detail-page">
  <TwoColLayout title={frontmatter.title} description={frontmatter.description}>
    <!-- head  -->
    <div slot="header">
      <div class="title">
        <h1 class="title-XXXL">{frontmatter.title}</h1>
        <div class="createAt">
          {dayjs(frontmatter.createAt).format("YYYY/MM/DD")}
        </div>
        <div class="tags">
          {
            frontmatter.tags.map((tag: string) => (
              <span class="tag">{tag}</span>
            ))
          }
        </div>
      </div>
    </div>
    <!-- content -->
    <div slot="content" class="content">
      <slot />
    </div>
    <!-- nav -->
    <div slot="nav">
      {
        isBlog ? (
          <div class="headings">
            <h2 class="title-M">目次</h2>
            <nav>
              <ul>
                {topHeading.map((heading: any) => (
                  <li class={`depth-${heading.depth}`}>
                    <a href={`#${heading.text}`}>{heading.text}</a>
                  </li>
                ))}
              </ul>
            </nav>
          </div>
        ) : null
      }
    </div>
    <div slot="footer">
      <Posts />
    </div>
  </TwoColLayout>
</div>

<style lang="scss"></style>
